
CONST l_include 10
CONST mt 0
MACRO setMathTarget { CONST mt }

GLOBAL mathReg
GLOBAL returnRegister

GLOBAL upKey
GLOBAL downKey
GLOBAL leftKey
GLOBAL rightKey
GLOBAL exitKey

GLOBAL cam_up
GLOBAL cam_down
GLOBAL cam_right
GLOBAL cam_left

GLOBAL stop_music
GLOBAL start_music


GLOBAL MovementSpeed

SET >MovementSpeed 1


VAR returnRegister

@setMathTarget >mathReg

GOTO #l_include

        CALL script/mathFunc.thp

LABEL #l_include

VAR value1
VAR value2


MACRO INIT_FLAGS {
        / x  y  tx  ty  cx cy fs sr title /
        800 800 500 500 0 0  0  0  nthp.exe
}

CORE_INIT @INIT_FLAGS

SET_ACTIVE_PALETTE resource/genericPalette.pal

CONST t_tux 0
CONST t_wall 1
TEXTURE_DEFINE 2
TEXTURE_LOAD #t_tux resource/c_tux.cst
TEXTURE_LOAD #t_wall resource/wall.cst

CONST f0_tux 0
CONST f0_wall 1
FRAME_DEFINE 2
FRAME_SET #f0_tux 0 0 764 910 #t_tux
FRAME_SET #f0_wall 0 0 100 76 #t_wall

@setMathTarget $value1
SQRT 732.3451 #mt

@setMathTarget $value2
COPY $value1 #mt
RSHIFT #mt 2
MUL #mt 5 #mt

COPY #mt >mathReg

CONST e_tux 0
CONST e_absTux 1

ENT_DEFINE 2
ENT_SETFRAMERANGE #e_tux 0 1
ENT_SETRENDERSIZE #e_tux 200 300
ENT_SETCURRENTFRAME #e_tux 0
ENT_SETPOS #e_tux 150 150
ENT_SETHITBOXSIZE #e_tux 200 300
ENT_SETHITBOXOFFSET #e_tux 0 0


ENT_SETFRAMERANGE #e_absTux #f0_wall 1
ENT_SETRENDERSIZE #e_absTux 10 10
ENT_SETCURRENTFRAME #e_absTux 0
ENT_SETPOS #e_absTux 0 0
ENT_SETHITBOXSIZE #e_absTux 2 2
ENT_SETHITBOXOFFSET #e_absTux 4 4

CORE_SETMAXFPS 500

CONST mus_aria 0
MUSIC_DEFINE 1
MUSIC_LOAD #mus_aria am.wav
MUSIC_START #mus_aria


CONST a_up 0
CONST a_down 1
CONST a_left 2
CONST a_right 3
CONST a_exit 4
CONST a_moveCamera_up 5
CONST a_moveCamera_down 6
CONST a_moveCamera_left 7
CONST a_moveCamera_right 8
CONST a_stopMusic 9
CONST a_startMusic 10

ACTION_DEFINE 11

ACTION_BIND #a_up >upKey w
ACTION_BIND #a_down >downKey s
ACTION_BIND #a_left >leftKey a
ACTION_BIND #a_right >rightKey d
ACTION_BIND #a_exit >exitKey ESCAPE

ACTION_BIND #a_moveCamera_up >cam_up UP
ACTION_BIND #a_moveCamera_down >cam_down DOWN
ACTION_BIND #a_moveCamera_left >cam_left LEFT
ACTION_BIND #a_moveCamera_right >cam_right RIGHT

ACTION_BIND #a_startMusic >start_music o
ACTION_BIND #a_stopMusic >stop_music p




CONST CONTEXT_MAINPROG __MAINPROG
EXIT
